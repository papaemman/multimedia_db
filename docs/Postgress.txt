====================
Postgresql Database
====================

Links:
- https://www.postgresql.org/


TODO:
Working with images and postgresql pgAdmin4
Add data from python to postgresql

Name, image_metadata, image_link_on_disc, descriptor_vector



// Tutorial //

1. Create a new Database
2. Create a new table
3. Datatypes
4. Query tool


Schemas -> Public -> Tables -> Crate new Table


Q: Where the database files have been stored?
What is the database files?

ps aux | grep postgres | grep -- -D

RUN This query
SELECT name, setting FROM pg_settings WHERE category = 'File Locations';

--------------------------------------------------------------------

// Python + PostgreSQL //






--------------------------------------------------------------------

// Working with postgresql //


$ whereis postgresql

postgresql: /usr/lib/postgresql /etc/postgresql /usr/include/postgresql /usr/share/postgresql


$ service postgresql

$ service postrgresql status


Change user to postgres
$ sudo su postrgresql

Check the Documentation of psql
$ man psql

Open psql terminal
$ psql
postgres=#

postgres=# HELP
You are using psql, the command-line interface to PostgreSQL.
Type:  \copyright for distribution terms
       \h for help with SQL commands
       \? for help with psql commands
       \g or terminate with semicolon to execute query
       \q to quit


postgres=# \l


Change the default password of postgres user
=# ALTER USER postgres WITH PASSWORD 'pass';

Create a new user
=# CREATE USER user_1 WITH PASSWORD 'pass';

=# \du

Give rights to the user
=# ALTER USER user_1 WITH SUPERUSER;

Remove a user
=# DROP USER user_1;



--------------------------------------------------------------------

// Installation instructions //

- https://www.postgresql.org/download/linux/ubuntu/
- https://codingpub.dev/ubuntu-install-postgresql-and-pgadmin/


# Create the file repository configuration:
$ sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'

# Import the repository signing key:
$ wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -

# Update the package lists:
$ sudo apt-get update

# Install the latest version of PostgreSQL.
# If you want a specific version, use 'postgresql-12' or similar instead of 'postgresql':

$ sudo apt-get -y install postgresql
$ sudo apt-get -y install postgresql-contrib



--> Configuration files

$ ls /etc/postrgres/13/main
conf.d  environment  pg_ctl.conf  pg_hba.conf  pg_ident.conf  postgresql.conf  start.conf
Main cofiguration file: postgresql.conf


--> Install pgAdmin III from Ubuntu Software store
pgAdmin is a GUI to interact with the database.


--> Install pgAdmin IV from Ubuntu Software store


$ curl https://www.pgadmin.org/static/packages_pgadmin_org.pub | sudo apt-key add

$ sudo sh -c 'echo "deb https://ftp.postgresql.org/pub/pgadmin/pgadmin4/apt/$(lsb_release -cs) pgadmin4 main" > /etc/apt/sources.list.d/pgadmin4.list && apt update'

Install 2 different modes (desktop and web)

$ sudo apt install pgadmin4-web
$ sudo apt install pgadmin4-desktop

$ sudo apt install pgadmin4


Configure pgAdmin IV
$ sudo /usr/pgadmin4/bin/setup-web.sh 

email: papaemman.pan@gmail.com
password: pass1234

http://127.0.0.1/pgadmin4


name: postgres
password: pass

- Open pgAdmin IV/ pgAdmin IV from Ubuntu Apps
- Open pgAdmin IV/ pgAdmin IV web using $ sudo /usr/pgadmin4/bin/setup-web.sh 

--------------------------------------------------------------------


// Included in distribution //

1. postgresql-client-12 : client libraries and client binaries
2. postgresql-12		: core database server
3. postgresql-contrib-9.x	: additional supplied modules (part of the postgresql-xx package in version 10 and later)
4. libpq-dev	: libraries and headers for C language frontend development
5. postgresql-server-dev-12	: libraries and headers for C language backend development
6. pgadmin4	: pgAdmin 4 graphical administration utility
